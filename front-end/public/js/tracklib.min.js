/*! evtrack -- Lib module */
var TrackLib=window.TrackLib||{};TrackLib.XPath={queryXPath:function(e,t){var n;if("function"==typeof e.evaluate)n=e.evaluate(t,e.documentElement,null,XPathResult.ANY_TYPE,null);else try{e.setProperty("SelectionLanguage","XPath"),n=e.selectNodes(t)}catch(e){n=!1}return n},getXPathNodes:function(e,t){for(var n=this.queryXPath(e,t),i=[],o=n.iterateNext();o;)i.push(o),o=n.iterateNext();return i},getXPath:function(e,t){var n=e.ownerDocument instanceof HTMLDocument,i=this.getNodePath(e,t),o=[];for(var r in i){var a,d=i[r];if(1==d.nodeType)if(0==r&&!t&&d.hasAttribute("id"))o.push("/*[@id='"+d.getAttribute("id")+"']");else{var c=d.tagName;n&&(c=c.toLowerCase()),-1<(a=this.getNodeIndex(d))?o.push(c+"["+a+"]"):o.push(c)}else 3==d.nodeType&&(-1<(a=this.getTextNodeIndex(d))?o.push("text()["+a+"]"):o.push("text()"))}return"/"+o.join("/")},getNodeIndex:function(e){if(1!=e.nodeType||null==e.parentNode)return null;var t=this.getChildNodesWithTagName(e.parentNode,e.tagName);if(1==t.length&&t[0]==e)return null;for(var n=0;n<t.length;n++)if(t[n]==e)return n+1;return-1},getTextNodeIndex:function(e){var t=this.getChildTextNodes(e.parentNode);if(1==t.length&&t[0]==e)return null;for(var n=0;n<t.length;n++)if(t[n]==e)return n+1;return-1},getChildNodesWithTagName:function(e,t){for(var n=[],i=e.firstChild;null!=i;)i.tagName&&i.tagName==t&&n.push(i),i=i.nextSibling;return n},getChildTextNodes:function(e){for(var t=[],n=e.firstChild;null!=n;)3==n.nodeType&&t.push(n),n=n.nextSibling;return t},getNodePath:function(e,t){for(var n=[];1==e.nodeType||3==e.nodeType;){if(n.unshift(e),1==e.nodeType&&e.hasAttribute("id")&&!t)return n;e=e.parentNode}return n}},TrackLib.XHR={createXMLHTTPObject:function(){for(var e=!1,t=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],n=0;n<t.length;++n){try{e=t[n]()}catch(e){continue}break}return e},sendAjaxRequest:function(e){var t=e.xmlhttp?e.xmlhttp:this.createXMLHTTPObject();if(!TrackLib.Util.sameDomain(window.location.href,e.url)&&window.XDomainRequest&&(t=new XDomainRequest),!t)return!1;var n=e.postdata?"POST":"GET",i=!e.hasOwnProperty("async")||e.async;t.open(n,e.url,i);var o=window.XDomainRequest&&t instanceof XDomainRequest;e.postdata&&!o&&t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o?t.onload=function(){"function"==typeof e.callback&&e.callback(t)}:t.onreadystatechange=function(){4==t.readyState&&"function"==typeof e.callback&&e.callback(t)},t.withCredentials=!0,"object"==typeof e.postdata&&(e.postdata=TrackLib.Util.serializeQuery(e.postdata)),t.send(e.postdata)}},TrackLib.Events={add:function(e,t,n){if(!e)return!1;e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e[t+n]=function(){n(window.event)}},remove:function(e,t,n){if(!e)return!1;e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):e[t+n]=null},fix:function(e){return(e=e||window.event).target||(e.target=e.srcElement||document),3==e.target.nodeType&&(e.target=e.target.parentNode),void 0===e.metaKey&&(e.metaKey=e.ctrlKey),e.id=e.identifier||0,e},domReady:function(e){if(document.addEventListener)document.addEventListener("DOMContentLoaded",e,!1);else if(document.attachEvent)try{document.write("<script id=__ie_onload defer=true src=//:><\/script>"),document.getElementById("__ie_onload").onreadystatechange=function(){"complete"===this.readyState&&e()}}catch(e){}else TrackLib.Events.add(window,"load",e)}},TrackLib.Dimension={getWindowSize:function(){var e=document;return{width:window.innerWidth?window.innerWidth:e.documentElement&&e.documentElement.clientWidth?e.documentElement.clientWidth:e.body&&e.body.clientWidth?e.body.clientWidth:0,height:window.innerHeight?window.innerHeight:e.documentElement&&e.documentElement.clientHeight?e.documentElement.clientHeight:e.body&&e.body.clientHeight?e.body.clientHeight:0}},getDocumentSize:function(){var e=document;return{width:window.innerWidth&&window.scrollMaxX?window.innerWidth+window.scrollMaxX:e.body&&e.body.scrollWidth>e.body.offsetWidth?e.body.scrollWidth:e.body&&e.body.offsetWidth?e.body.offsetWidth:0,height:window.innerHeight&&window.scrollMaxY?window.innerHeight+window.scrollMaxY:e.body&&e.body.scrollHeight>e.body.offsetHeight?e.body.scrollHeight:e.body&&e.body.offsetHeight?e.body.offsetHeight:0}},getPageSize:function(){var e=this.getWindowSize(),t=this.getDocumentSize();return{width:t.width<e.width?e.width:t.width,height:t.height<e.height?e.height:t.height}}},TrackLib.Util={sameDomain:function(e){for(var t,n,i=!0,o=0,r=arguments.length;o<r;++o)0<o&&(t=arguments[o],i=this.getDomain(n)==this.getDomain(t)),n=arguments[o];return i},getDomain:function(e){var t,n=document.createElement("a");return n.href=e,t=n.hostname,n=null,t},serializeAttrs:function(e){var t={};if(e&&e.attributes){t[e.nodeName]={};for(var n=0,i=e.attributes.length;n<i;n++){var o=e.attributes[n];o.specified&&(t[e.nodeName][o.name]=o.value)}}return JSON.stringify(t)},serializeQuery:function(e){var t="",n=0;for(var i in e)e.hasOwnProperty(i)&&(0<n&&(t+="&"),t+=i+"="+e[i],n++);return t}};